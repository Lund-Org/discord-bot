(this["webpackJsonpgatcha-front"]=this["webpackJsonpgatcha-front"]||[]).push([[0],{32:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(23),r=c.n(a),i=c(13),l=c(2),d=(c(32),c(33),c(34),c(35),c(36),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,50)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))}),o=c(0),j=function(){return Object(o.jsx)("nav",{children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)(i.b,{to:"/",children:"Home"})}),Object(o.jsx)("li",{children:Object(o.jsx)(i.b,{to:"/ranks",children:"Leaderboard"})})]})})},u=c(7),b=c(8),f=c(11),h=c.n(f),O=c(18),x=function(){var e=Object(O.a)(h.a.mark((function e(t){var c,n,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.filters,n=void 0===c?{}:c,s={method:"GET",headers:{Accept:"application/json"}},e.abrupt("return",new Promise((function(e,t){fetch("/api/cards?filters=".concat(encodeURI(JSON.stringify(n))),s).then((function(e){return e.json()})).then(e).catch(t)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=s.a.createContext({filters:{gold:!1,fusion:!1,filterStars:"all",search:""},updateFilters:function(){return null},cards:[],cardSelected:null,selectCard:function(){},filterPanelState:!1,toggleFilterPanelState:function(){}}),v=function(){return Object(n.useContext)(m)},p=function(e){var t=e.children,c=Object(n.useState)({gold:!1,fusion:!1,filterStars:"all",search:""}),s=Object(u.a)(c,2),a=s[0],r=s[1],i=Object(n.useState)([]),l=Object(u.a)(i,2),d=l[0],j=l[1],f=Object(n.useState)(null),h=Object(u.a)(f,2),O=h[0],v=h[1],p=Object(n.useState)(!1),g=Object(u.a)(p,2),N=g[0],S=g[1];Object(n.useEffect)((function(){x({filters:Object(b.a)(Object(b.a)({},"all"===a.filterStars?{}:{level:a.filterStars.length}),{},{search:a.search,fusion:a.fusion})}).then((function(e){j(e)}))}),[a.filterStars,a.search,a.fusion]);var k={filters:a,updateFilters:r,cards:d,cardSelected:O,selectCard:function(e){v(e)},filterPanelState:N,toggleFilterPanelState:function(){S(!N)}};return Object(o.jsx)(m.Provider,{value:k,children:t})},g=function(e){var t=e.card,c=v().selectCard;return Object(o.jsxs)("div",{className:"card-list-item",onClick:function(){return function(){var e;c(t),null===(e=document.getElementById("card_".concat(t.id)))||void 0===e||e.scrollIntoView()}()},children:[Object(o.jsx)("span",{className:"fusion-icon",children:t.isFusion?Object(o.jsx)("i",{className:"fas fa-atom"}):null}),Object(o.jsx)("span",{className:"level-icon",children:Array.from(Array(t.level)).map((function(e,t){return Object(o.jsx)("i",{className:"fas fa-star fa-xs"},t)}))}),Object(o.jsxs)("span",{className:"card-name",children:["#",t.id," - ",t.name]})]})},N=c(17),S=["all","*","**","***","****"],k=function(){var e=v(),t=e.filters,c=e.updateFilters,n=function(e,n){c(Object(b.a)(Object(b.a)({},t),{},Object(N.a)({},e,n)))};return Object(o.jsxs)("div",{className:"home-filter-view",children:[Object(o.jsx)("div",{className:"home-filter-group",children:Object(o.jsx)("input",{type:"text",onChange:function(e){return n("search",e.target.value)},value:t.search,placeholder:"Recherche"})}),Object(o.jsxs)("div",{className:"home-filter-group",children:[Object(o.jsx)("label",{children:"Nombre d'\xe9toiles : "}),Object(o.jsx)("select",{value:t.filterStars,onChange:function(e){return n("filterStars",e.target.value)},children:S.map((function(e,t){return Object(o.jsx)("option",{value:e,children:e},t)}))})]}),Object(o.jsx)("div",{className:"home-filter-group",children:Object(o.jsxs)("label",{children:[Object(o.jsx)("input",{type:"checkbox",onChange:function(){return n("gold",!t.gold)},checked:t.gold}),"Visualiser les cartes en dor\xe9e"]})}),Object(o.jsx)("div",{className:"home-filter-group",children:Object(o.jsxs)("label",{children:[Object(o.jsx)("input",{type:"checkbox",onChange:function(){return n("fusion",!t.fusion)},checked:t.fusion}),"Cartes fusions uniquement"]})})]})},w=c(27),F=function(e){var t=e.id,c=e.img,s=e.title,a=e.description,r=e.level,i=e.type,l=void 0===i?"basic":i,d=e.isFusion,j=void 0!==d&&d,b=e.className,f=void 0===b?"":b,h=Object(n.useState)({currentWidth:0,fontSize:"40px"}),O=Object(u.a)(h,2),x=O[0],m=O[1],v=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=function(){v.current&&x.currentWidth!==v.current.clientWidth&&m({currentWidth:v.current.clientWidth,fontSize:"".concat(40*v.current.clientWidth/475,"px")})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(o.jsx)("div",{ref:v,className:"".concat(f," ").concat(l," card-container"),style:{fontSize:x.fontSize},children:Object(o.jsxs)("div",{className:"card",children:[Object(o.jsxs)("div",{className:"card-header",children:[j?Object(o.jsx)("div",{className:"card-fusion",children:"Fusion"}):null,Object(o.jsxs)("div",{className:"card-id",children:["#",t]})]}),Object(o.jsx)("div",{className:"card-img",style:{backgroundImage:'url("/images'.concat(c,'")')}}),Object(o.jsx)("div",{className:"card-title",children:s}),Object(o.jsx)("div",{className:"card-separator",children:Object(o.jsx)("div",{className:"card-line"})}),Object(o.jsx)("div",{className:"card-description",children:a}),Object(o.jsx)("div",{className:"card-stars",children:Object(w.a)(Array(r)).map((function(e,t){return Object(o.jsx)("div",{className:"card-star"},t)}))})]})})},y=function(e){var t=e.card,c=v().selectCard;return Object(o.jsxs)("div",{className:"fusion-dependencies",children:[Object(o.jsx)("h5",{children:"Composants pour la fusion :"}),Object(o.jsx)("ul",{className:"fusion-details",children:t.fusionDependencies.map((function(e,t){return Object(o.jsx)("li",{onClick:function(){return function(e){c(e)}(e)},children:Object(o.jsx)(g,{card:e})},t)}))})]})},C=function(){var e=v(),t=e.cardSelected,c=e.filters;return t?Object(o.jsxs)("div",{className:"gacha-home-mobile-view",children:[Object(o.jsx)("div",{className:"gacha-home-mobile-view-card-block",children:Object(o.jsx)(F,{className:"scale-horizontally quarter ".concat(c.gold?"gold":""),id:t.id,img:t.imageName,title:t.name,description:t.description,level:t.level,isFusion:t.isFusion,type:c.gold?"gold":"basic"})}),t.isFusion?Object(o.jsx)(y,{card:t}):null]}):null},P=function(e){var t=e.mobile,c=v(),n=c.cardSelected,s=c.filterPanelState,a=c.toggleFilterPanelState,r=c.cards,i=c.filters,l=c.selectCard,d=r.filter((function(e){return!i.fusion||e.isFusion})).filter((function(e){return!i.search||e.name.includes(i.search)})).filter((function(e){return"all"===i.filterStars||e.level===i.filterStars.length}));return Object(o.jsxs)("div",{className:"home-navigation ".concat(t?"mobile-navigation":""),children:[Object(o.jsxs)("div",{className:"filters-section",children:[Object(o.jsxs)("h4",{onClick:function(){a(),t&&!s&&l(null)},children:[Object(o.jsx)("i",{className:"fas fa-bars"}),Object(o.jsx)("span",{children:"Filtres"})]}),Object(o.jsx)("div",{className:"filter-".concat(s?"opened":"closed"),children:s?Object(o.jsx)(k,{}):null})]}),Object(o.jsx)("ul",{children:d.map((function(e,c){return Object(o.jsxs)("li",{id:"card_".concat(e.id),children:[Object(o.jsx)(g,{card:e}),t&&(null===n||void 0===n?void 0:n.id)===e.id?Object(o.jsx)(C,{}):null]},c)}))})]})},E=function(){return Object(o.jsxs)("div",{className:"home-empty-view",children:[Object(o.jsx)("div",{className:"filter-arrow",children:Object(o.jsx)("i",{className:"fas fa-level-up-alt fa-rotate-270 fa-2x"})}),Object(o.jsx)("div",{className:"filter-text",children:"Filtre"}),Object(o.jsx)("div",{className:"pick-card-text",children:"Choisis une carte"}),Object(o.jsx)("div",{className:"pick-card-arrow",children:Object(o.jsx)("i",{className:"fas fa-level-down-alt fa-rotate-90 fa-2x"})}),Object(o.jsxs)("div",{className:"details-text",children:[Object(o.jsx)("i",{className:"fas fa-info-circle"}),"Les d\xe9tails apparaitront ici"]})]})},L=function(){var e=v(),t=e.cardSelected,c=e.filters,n=e.updateFilters;return t?Object(o.jsxs)("div",{className:"gacha-home-web-view",children:[Object(o.jsx)("div",{className:"gacha-home-web-view-card-block",children:Object(o.jsx)(F,{className:"scale-horizontally quarter ".concat(c.gold?"gold":""),id:t.id,img:t.imageName,title:t.name,description:t.description,level:t.level,isFusion:t.isFusion,type:c.gold?"gold":"basic"})}),Object(o.jsxs)("div",{className:"flex-centered pad-y-10",children:[Object(o.jsxs)("label",{className:"switch",children:[Object(o.jsx)("input",{type:"checkbox",onChange:function(){return n(Object(b.a)(Object(b.a)({},c),{},{gold:!c.gold}))},checked:c.gold}),Object(o.jsx)("span",{className:"slider round"})]}),Object(o.jsx)("span",{children:"Visualiser en or"})]}),t.isFusion?Object(o.jsx)(y,{card:t}):null]}):Object(o.jsx)(E,{})},z=function(e){var t=e.mobile,c=v().cardSelected;return t?null:c?Object(o.jsx)(L,{}):Object(o.jsx)(E,{})},W=(c(47),function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){function e(){s(window.innerWidth<=600)}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(o.jsx)("div",{className:"gacha-home",children:Object(o.jsxs)(p,{children:[Object(o.jsx)(P,{mobile:c}),Object(o.jsx)(z,{mobile:c})]})})}),I=c(26),A=function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{Accept:"application/json"}},e.abrupt("return",new Promise((function(e,c){fetch("/api/ranks",t).then((function(e){return e.json()})).then(e).catch(c)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){var t=e.rank,c=e.level;return Object(o.jsxs)("div",{className:"rank-item top-".concat(c),children:[Object(o.jsx)("div",{className:"rank-medal-icon",children:function(){switch(c){case 1:return"\ud83e\udd47";case 2:return"\ud83e\udd48";default:return"\ud83e\udd49"}}()}),Object(o.jsx)("div",{className:"rank-username",children:t.discord_id}),Object(o.jsxs)("div",{className:"rank-level",children:["Niveau : ",t.level.currentLevel]}),Object(o.jsxs)("div",{className:"rank-xp",children:["XP : ",t.currentXP]})]})},_=function(e){var t=e.ranks;return Object(o.jsx)("ol",{start:4,children:t.map((function(e){return Object(o.jsxs)("li",{children:[Object(o.jsx)("strong",{children:e.discord_id}),", niveau ",e.level.currentLevel," avec ",e.currentXP,"xp"]})}))})},q=(c(48),function(){var e=Object(n.useState)(!0),t=Object(u.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)([]),r=Object(u.a)(a,2),i=r[0],l=r[1];if(Object(n.useEffect)((function(){A().then((function(e){l(e),s(!1)}))}),[]),c)return"Loading";var d=Object(I.a)(i),j=d[0],b=d[1],f=d[2],h=d.slice(3);return Object(o.jsxs)("div",{className:"gacha-ranks",children:[Object(o.jsxs)("div",{className:"gacha-top-ranks",children:[Object(o.jsx)(T,{rank:j,level:1}),Object(o.jsx)(T,{rank:b,level:2}),Object(o.jsx)(T,{rank:f,level:3})]}),Object(o.jsx)("div",{className:"gacha-rank-list",children:Object(o.jsx)(_,{ranks:h})})]})});r.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsxs)(i.a,{children:[Object(o.jsx)(j,{}),Object(o.jsxs)(l.c,{children:[Object(o.jsx)(l.a,{path:"/ranks",children:Object(o.jsx)(q,{})}),Object(o.jsx)(l.a,{path:"/",children:Object(o.jsx)(W,{})})]})]})}),document.getElementById("root")),d()}},[[49,1,2]]]);
//# sourceMappingURL=main.22307248.chunk.js.map